<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>Clube do Grito</title>
    <link rel="manifest" href="/manifest.json" />
    <!-- Cielo Silent Order Post Script -->
    <script id="cielo-sop-script"></script>
    <script>
      // Carrega o script correto baseado no ambiente (via variável process.env.CIELO_ENV)
      (function() {
        // Determina ambiente via meta tag (setado pelo backend)
        const cieloEnvMeta = document.querySelector('meta[name="cielo-env"]');
        const cieloEnv = cieloEnvMeta ? cieloEnvMeta.getAttribute('content') : 'sandbox';
        
        const sopScriptUrl = cieloEnv === 'prod'
          ? 'https://transaction.pagador.com.br/post/scripts/silentorderpost-1.0.min.js'
          : 'https://transactionsandbox.pagador.com.br/post/scripts/silentorderpost-1.0.min.js';
        
        const scriptEl = document.getElementById('cielo-sop-script');
        scriptEl.src = sopScriptUrl;
        scriptEl.onload = function() {
          console.log('✅ [CIELO SOP] Script carregado:', cieloEnv);
        };
        scriptEl.onerror = function() {
          console.error('❌ [CIELO SOP] Erro ao carregar script');
        };
      })();
    </script>
    <script type="module" crossorigin src="/assets/index-LV4ShgWc.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-Be5usema.css">
  <link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
  <body>
    <div id="root"></div>
    <!-- Replit banner script - disabled on mobile to prevent DOM conflicts -->
    <script>
      // Only load Replit banner script on desktop to avoid mobile DOM conflicts
      if (window.innerWidth > 768 && !navigator.userAgent.match(/Mobile|Android|iPhone|iPad/i)) {
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://replit.com/public/js/replit-dev-banner.js';
        document.head.appendChild(script);
      }
    </script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/service-worker.js")
          .then(() => console.log("Service Worker registrado com sucesso!"))
          .catch((err) => console.error("Erro ao registrar o Service Worker:", err));
      }
    </script>
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/logo192.png" />
  </body>
</html>