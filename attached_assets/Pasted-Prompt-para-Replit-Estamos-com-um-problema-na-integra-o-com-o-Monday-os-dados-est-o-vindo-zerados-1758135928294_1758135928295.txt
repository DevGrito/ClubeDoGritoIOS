Prompt para Replit

Estamos com um problema na integra√ß√£o com o Monday: os dados est√£o vindo zerados (0 programas, 0 workstreams, 0 indicadores), mesmo tendo dados reais cadastrados no Monday.

O que descobrimos:

O backend est√° conectado, mas est√° tentando filtrar usando os labels/nomes ("Casa Sonhar", "Neg√≥cios Sociais", "Favela 3D") direto.

O Monday n√£o aceita texto como filtro, e sim o ID da coluna e o √≠ndice num√©rico (value.index) correspondente ao status ou dropdown.

A query GraphQL atual provavelmente est√° incompleta e n√£o est√° trazendo column_values com id, text e value.

Tamb√©m precisamos confirmar se o backend est√° usando o board ID correto do Monday. Se estiver apontando para um board vazio, vai sempre retornar 0.

O que voc√™ precisa implementar no backend:

Rodar uma chamada inicial ao Monday para listar todos os itens e colunas do board:

query {
  boards(ids: BOARD_ID) {
    id
    name
    items {
      id
      name
      column_values {
        id
        title
        text
        value
      }
    }
  }
}


Isso deve ser usado para mapear as √°reas/projetos.

Montar um mapa interno (MONDAY_AREAS_MAP) que relacione os labels do app com os dados reais do Monday (coluna + √≠ndice).
Exemplo:

const MONDAY_AREAS_MAP = {
  "casa-sonhar": { columnId: "status", index: 2 },
  "negocios-sociais": { columnId: "status", index: 3 },
  "favela-3d": { columnId: "status", index: 4 },
  "polo-esportivo-cultural": { columnId: "status", index: 5 },
  "psicossocial": { columnId: "status", index: 6 },
  "inclusao-produtiva": { columnId: "status", index: 7 }
}


Quando o usu√°rio aplicar filtro no app, o backend deve traduzir esse filtro para o formato aceito pelo Monday.
Exemplo de payload correto (GraphQL vari√°vel):

query ($boardId: Int!, $columnId: String!, $index: Int!) {
  boards(ids: [$boardId]) {
    items {
      id
      name
      column_values(ids: [$columnId]) {
        id
        text
        value
      }
    }
  }
}


E no variables:

{
  "boardId": 123456789,
  "columnId": "status",
  "index": 2
}


Adicionar logs no backend mostrando:

Qual filtro foi aplicado no app (ex: "Casa Sonhar")

Para qual columnId e index foi traduzido (ex: status / 2)

Qual board ID est√° sendo consultado

Resumindo:

üëâ Precisamos que o backend do Monday n√£o mande string como filtro.
üëâ Ele deve mapear label ‚Üí coluna + √≠ndice e passar isso na query GraphQL.
üëâ Tamb√©m verificar se o boardId configurado √© o correto.
üëâ Adicionar logs para debug.